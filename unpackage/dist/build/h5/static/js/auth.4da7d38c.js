(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth"],{1145:function(e,t,r){"use strict";var o;r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{},[r("v-uni-view",{},[e._v("auth")]),r("v-uni-view",{},[e._v("code"),r("v-uni-input",{attrs:{value:e.code}})],1),r("v-uni-view",{},[e._v("redirectUrl "+e._s(e.redirectUrl))]),r("v-uni-view",{},[e._v("msg "+e._s(e.msg))])],1)},a=[]},"3e4b":function(e,t,r){"use strict";r.r(t);var o=r("1145"),n=r("683e");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);var u,i=r("f0c5"),c=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,"aafedcb0",null,!1,o["a"],u);t["default"]=c.exports},5695:function(e,t,r){"use strict";r("ac1f"),r("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"Auth",data:function(){return{code:"",redirectUrl:"",msg:""}},mounted:function(){var e=this,t=sessionStorage.getItem("wxRedirectUrl");if(this.code=this.$route.query.code,this.redirectUrl=t,this.$route.query.code)try{uni.request({url:"https://metamusic.toob.net.cn/api/oauth/wechat/oalogin?code="+this.$route.query.code,method:"GET",success:function(r){if(console.log("request api:",r),e.msg="success"+JSON.stringify(r),200==r.state){var o=r.headers["access_token"];localStorage.setItem("token",o),localStorage.setItem("wxUserInfo",JSON.stringify(r.data.root)),localStorage.setItem("openId",r.data.root.openId),uni.setStorage({key:"openId",data:r.data.root.openId}),uni.setStorage({key:"userInfo",data:JSON.stringify(r.data.root)})}console.log("request redirectUrl:",t),t?e.$router.replace(t):e.$router.replace("./")},fail:function(t){e.msg="auth fail"+JSON.stringify(t),console.log("auth fail",t)}})}catch(r){console.log(r)}else console.log("auth fail",this.$route.query.code),this.$router.replace("/")}};t.default=o},"683e":function(e,t,r){"use strict";r.r(t);var o=r("5695"),n=r.n(o);for(var a in o)"default"!==a&&function(e){r.d(t,e,(function(){return o[e]}))}(a);t["default"]=n.a}}]);